# 贡献指南

感谢您对 Pain 项目的关注！我们非常欢迎社区贡献，并致力于为所有贡献者提供友好和包容的环境。

## 贡献前准备

在开始贡献之前，请确保您已经：

1. 阅读并理解了项目的 [README.md](https://github.com/ivanallen/pain/blob/main/README.md)
2. 按照说明配置好了开发环境
3. 熟悉项目的基本架构和代码风格

## 开发环境设置

请按照 [README.md](https://github.com/ivanallen/pain/blob/main/README.md) 中的详细说明配置您的开发环境，包括必要的依赖项和工具链。

## 代码质量要求

### 1. 测试覆盖率

所有新功能和修改都必须包含相应的测试用例。在提交代码之前，请确保：

```bash
# 运行所有测试
./z.py t

# 确保所有测试通过
```

**重要**: 如果您的修改导致测试失败，请先修复测试问题再提交代码。

### 2. 代码格式化

项目使用统一的代码格式标准。在提交代码之前，请运行以下命令自动格式化您的代码：

```bash
# 自动格式化代码
./z.py f
```

### 3. 代码质量检查

项目使用 clang-tidy 进行代码质量检查。请确保您的代码通过所有 lint 检查：

```bash
# 生成编译数据库（lint 检查依赖此文件）
./tools/compile_commands.sh all

# 运行 lint 检查
./z.py lint
```

如果 lint 检查发现问题，系统会明确指出问题位置和类型。建议您：

- 仔细阅读错误信息
- 根据建议修复代码问题
- 重新运行 lint 检查直到通过

## 开发工具推荐

### IDE 配置

为了获得最佳的开发体验，我们推荐您：

1. **安装 clangd 插件**：如果您使用 VS Code 或其他支持 LSP 的 IDE，强烈建议安装 clangd 插件
2. **配置 clangd**：插件会自动提供代码补全、错误提示和格式化建议
3. **实时反馈**：IDE 会实时显示代码问题，帮助您及时发现和修复问题

### 推荐的开发工具

- **VS Code** + clangd 插件
- **CLion**（内置 clang-tidy 支持）
- **Vim/Neovim** + clangd 插件
- **Emacs** + clangd 插件

## 提交规范

### 提交信息格式

请使用清晰的提交信息格式：

```
<类型>(<范围>): <简短描述>

<详细描述（可选）>

<相关问题链接（可选）>
```

**类型示例**：
- `feat`: 新功能
- `fix`: 错误修复
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 代码审查

所有代码提交都需要通过代码审查。请确保：

1. 代码符合项目规范
2. 包含必要的测试用例
3. 通过所有质量检查
4. 提供清晰的提交说明

## 问题报告

如果您发现了 bug 或有功能建议，请：

1. 在 GitHub Issues 中搜索是否已有相关问题
2. 如果没有，请创建新的 issue
3. 提供详细的复现步骤和环境信息
4. 使用清晰的标题和描述

## 功能请求

对于新功能请求，请：

1. 详细描述功能需求和使用场景
2. 说明为什么需要此功能
3. 提供可能的实现思路（如果适用）
4. 讨论对现有功能的影响

## 社区行为准则

我们致力于维护一个友好、包容的开发社区。请：

- 尊重所有贡献者
- 使用建设性的语言进行讨论
- 欢迎新手贡献者
- 提供有建设性的反馈

## 获取帮助

如果您在贡献过程中遇到问题：

1. 查看项目文档
2. 搜索现有的 issues 和讨论
3. 在 GitHub Discussions 中提问
4. 联系项目维护者

## 致谢

再次感谢您对 Pain 项目的贡献！您的参与对项目的发展至关重要。

---

**注意**: 本指南会随着项目发展而更新。如果您发现指南中的任何问题或有改进建议，欢迎提出 issue 或 pull request。
